<?xml version="1.0" encoding="utf-8"?>
<!--
/*
**
** Copyright 2008, The Android Open Source Project
**
** Licensed under the Apache License, Version 2.0 (the "License");
** you may not use this file except in compliance with the License.
** You may obtain a copy of the License at
**
**     http://www.apache.org/licenses/LICENSE-2.0
**
** Unless required by applicable law or agreed to in writing, software
** distributed under the License is distributed on an "AS IS" BASIS,
** WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
** See the License for the specific language governing permissions and
** limitations under the License.
*/
-->

<manifest
    xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.tpw.homeshell" xmlns:tools="http://schemas.android.com/tools"
    android:versionCode="20150720"
    android:versionName="1.0.1">

    <original-package android:name="com.tpw.homeshell" />
    <uses-sdk
        android:minSdkVersion="19"
        android:targetSdkVersion="19" />

    <permission
        android:name="com.tpw.homeshell.permission.PRELOAD_WORKSPACE"
        android:permissionGroup="android.permission-group.SYSTEM_TOOLS"
        android:protectionLevel="system|signature" />
    <permission
        android:name="com.tpw.homeshell.permission.INSTALL_SHORTCUT"
        android:permissionGroup="android.permission-group.SYSTEM_TOOLS"
        android:protectionLevel="dangerous"
        android:label="@string/permlab_install_shortcut"
        android:description="@string/permdesc_install_shortcut" />
    <permission
        android:name="com.tpw.homeshell.permission.UNINSTALL_SHORTCUT"
        android:permissionGroup="android.permission-group.SYSTEM_TOOLS"
        android:protectionLevel="dangerous"
        android:label="@string/permlab_uninstall_shortcut"
        android:description="@string/permdesc_uninstall_shortcut"/>
    <permission
        android:name="com.tpw.homeshell.permission.READ_SETTINGS"
        android:permissionGroup="android.permission-group.SYSTEM_TOOLS"
        android:protectionLevel="normal"
        android:label="@string/permlab_read_settings"
        android:description="@string/permdesc_read_settings"/>
    <permission
        android:name="com.tpw.homeshell.permission.WRITE_SETTINGS"
        android:permissionGroup="android.permission-group.SYSTEM_TOOLS"
        android:protectionLevel="normal"
        android:label="@string/permlab_write_settings"
        android:description="@string/permdesc_write_settings"/>

    <!-- topwise zyf add -->
    <uses-permission android:name="android.permission.WRITE_SETTINGS" />
    <!-- topwise zyf add end-->
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.CALL_PHONE" />
    <uses-permission android:name="android.permission.SET_WALLPAPER" />
    <uses-permission android:name="android.permission.SET_WALLPAPER_HINTS" />
    <uses-permission android:name="android.permission.VIBRATE"/>
    <uses-permission android:name="android.permission.BIND_APPWIDGET"/>
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS" />
    <uses-permission android:name="com.tpw.homeshell.permission.READ_SETTINGS" />
    <uses-permission android:name="com.tpw.homeshell.permission.WRITE_SETTINGS" />
    <!-- vp install -->
    <uses-permission android:name="android.permission.INSTALL_PACKAGES" />
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
    <!-- for traffic panel begin -->
    <!--   change wifi status  -->
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />

    <!-- mobile data switch -->
    <uses-permission android:name="android.permission.MODIFY_PHONE_STATE"></uses-permission>
    <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE"></uses-permission>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"></uses-permission>
    <!-- for traffic panel end -->

    <!-- to lock screen by mimicing power button   -->
    <uses-permission android:name="android.permission.DEVICE_POWER" />

    <!-- added for backup restore -->
    <uses-permission android:name="com.tpw.permission.TYID_SERVICE" />
    <uses-permission android:name="com.tpw.permission.TYID_MGR_SERVICE" />
    <!-- end for backup restore -->


    <!-- for appstore begin -->
    <uses-permission android:name="com.tpw.wireless.vos.appstore.ACCESS_CLOUD"/>
    <uses-permission android:name="com.tpw.ams.RMI_PERMISSION"/>
    <uses-permission android:name="android.permission.INTERNET" />
    <!-- for appstore end -->
    <uses-permission android:name="android.permission.READ_FRAME_BUFFER" />
    <!-- for optimize uninstalling-process begin -->
    <uses-permission android:name="android.permission.DELETE_PACKAGES"/>
    <!-- for optimize uninstalling-process end -->
    <!-- for unlock animation begin -->
    <uses-permission android:name="android.permission.GET_TASKS"/>
    <!-- for unlock animation end -->
    <!-- for dynamic icon  -->
    <uses-permission android:name="android.permission.READ_SMS" />
    <uses-permission android:name="android.permission.WRITE_SMS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.READ_CALL_LOG" />
    <uses-permission android:name="android.permission.READ_CALENDAR" />
    <!-- for dynamic icon end -->

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
	<uses-permission android:name="android.permission.READ_MEDIA_STORAGE" />
    <uses-permission android:name="android.permission.WRITE_MEDIA_STORAGE" />
    <!-- for user track end -->

    <!-- for lifecard begin-->
    <uses-permission android:name="android.permission.READ_LIFE_CARDS" />
    <uses-permission android:name="android.permission.WRITE_LIFE_CARDS" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <!-- added for usertrack-->
    <uses-permission android:name="android.permission.WRITE_SETTINGS" />
    <!-- for lifecard end-->

    <!-- for privacy space of security center -->
    <uses-permission android:name="android.permission.provider.SECURITYCENTER" />

    <!-- for gadget card -->
    <uses-permission android:name="com.tpw.mobile.email.permission.ACCESS_PROVIDER" />

    <!-- for pushtalk service -->
    <uses-permission android:name="com.yunos.vui.service.permission" />

    <!-- Begin: for mobile search -->
    <uses-permission android:name="android.permission.MSEARCH_PROVIDER_ACCESS"/>
    <uses-permission android:name="com.yunos.permission.LOCATED"/>
    <!-- End: for mobile search -->

    <!-- Begin: for app-freeze feature in hide-seat
         This permission is defined in Settings app. For more information, please
         see com.tpw.homeshell.appfreeze.AppFreezeUtil class.
         -->
    <uses-permission android:name="com.tpw.permission.appfreeze" />
    <!-- End:   for app-freeze feature in hide-seat -->

    <!-- for frequently-used settings gadget card -->
    <uses-permission android:name="com.android.settings.READ_FREQUENTLY_USED_SETTINGS" />

    <!--for backup restore security -->
    <uses-permission android:name="com.yunos.sync.manager.permission.RESTORE_APPS" />

    <uses-permission android:name="com.tpw.wireless.vos.appstore.RECOMEND_APP_LIST" />

    <uses-permission android:name="android.permission.MANAGE_ACCOUNTS" />
    <uses-permission android:name="com.xiami.walkman.permission.broadcast" />

    <application
        android:name="com.tpw.homeshell.LauncherApplication"
        android:label="@string/application_name"
        android:icon="@mipmap/ic_launcher_home"
        android:hardwareAccelerated="true"
        android:largeHeap="@bool/config_largeHeap"
        android:supportsRtl="true"
        android:backupAgent=".backuprestore.BackupAgent"
        android:allowBackup="true"
        android:killAfterRestore="false">

        <!-- added for backup restore -->
        <meta-data android:name="com.tpw.backup.api_key"
            android:value="AEdPqrEAAAAIDaYEVgU6DJnyJdBmU7KLH3kszDXLv_4DIsEIyQ" />
        <!-- end for backup restore -->
        <activity
            android:name="com.tpw.homeshell.Launcher"
            android:launchMode="singleTask"
            android:clearTaskOnLaunch="true"
            android:stateNotNeeded="true"
            android:theme="@+style/Theme.Ali.Wallpaper.NoTitleBar"
            android:windowSoftInputMode="adjustPan"
            android:configChanges="mcc|mnc|orientation"
            android:excludeFromRecents="true"
            android:screenOrientation="portrait">
            <!-- use the theme below for eclipse building -->
            <!-- android:theme="@style/Theme" -->
            <!-- android:configChanges="auiTheme" -->
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.HOME" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.MONKEY"/>
            </intent-filter>
        </activity>

        <activity
            android:name="com.tpw.homeshell.tools.DB2ConfigXml"
            android:screenOrientation="portrait" >
        </activity>

        <activity
            android:name="com.tpw.homeshell.setting.HomeShellSetting"
            android:excludeFromRecents="true"
            android:screenOrientation="portrait"
            android:theme="@+style/Theme.HWDroid.Ali.WithActionBar" >
        </activity>

        <activity
            android:name="com.tpw.homeshell.setting.EffectChooseActivity"
            android:excludeFromRecents="true"
            android:screenOrientation="portrait"
            android:theme="@+style/Theme.HWDroid.Ali.WithActionBar">
        </activity>
        <activity
            android:name="com.tpw.homeshell.setting.LiveWeatherChooseActivity"
            android:excludeFromRecents="true"
            android:screenOrientation="portrait"
            android:theme="@+style/Theme.HWDroid.Ali.WithActionBar">
        </activity>
        <service
            android:name="com.tpw.homeshell.CardNotificationListenerService"
            android:label="@string/noti_service_name"
            android:permission="android.permission.BIND_NOTIFICATION_LISTENER_SERVICE" >
            <intent-filter>
                <action android:name="android.service.notification.NotificationListenerService" />
            </intent-filter>
        </service>

        <receiver android:name="com.tpw.homeshell.backuprestore.BackupBroadcastReceiver">
            <intent-filter>
                <action
                    android:name="com.tpw.vos.wireless.appstore.restoreAppDone" />
            </intent-filter>
            <intent-filter >
                <action
                    android:name="com.tpw.xiaoyunmi.systembackup.RestoreAllApp"/>
            </intent-filter>
            <intent-filter >
                <action
                    android:name="com.tpw.homeshell.systembackup.RestoreAllApp"/>
            </intent-filter>
        </receiver>
        <!-- end for backup restore -->

        <!-- Intent received used to prepopulate the default workspace. -->
        <receiver
            android:name="com.tpw.homeshell.PreloadReceiver"
            android:permission="com.tpw.homeshell.permission.PRELOAD_WORKSPACE">
            <intent-filter>
                <action android:name="com.tpw.homeshell.action.PRELOAD_WORKSPACE" />
            </intent-filter>
        </receiver>
        <!-- 
        register this receiver instead of dynamic mode to prevent the homeshell process start by notifications when the homeshell process is die or not start, in case to reduce the process start/die and cpu consume
        -->
        <!--
        <receiver android:name="com.tpw.homeshell.NotificationReceiver">
            <intent-filter>
                <action
                    android:name="com.tpw.action.application.notification" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.PACKAGE_DATA_CLEARED"/>
                <data android:scheme="package" />
            </intent-filter>
        </receiver>
        -->
        <!-- Intent received used to install shortcuts from other applications -->
        <receiver
            android:name="com.tpw.homeshell.InstallShortcutReceiver">
            <intent-filter>
                <action android:name="com.tpw.homeshell.action.INSTALL_SHORTCUT" />
            </intent-filter>
            <intent-filter>
                <action android:name="com.tpw.homeshell.action.INSTALL_SHORTCUT" />
                <category android:name="com.tpw.homeshell.category.SHORTCUT_CLOUDAPP" />
            </intent-filter>
            <intent-filter>
                <action android:name="com.android.launcher.action.INSTALL_SHORTCUT" />
            </intent-filter>
        </receiver>

        <!-- Intent received used to uninstall shortcuts from other applications -->
        <receiver
            android:name="com.tpw.homeshell.UninstallShortcutReceiver">
            <intent-filter>
                <action android:name="com.tpw.homeshell.action.UNINSTALL_SHORTCUT" />
            </intent-filter>
            <intent-filter>
                <action android:name="com.tpw.homeshell.action.UNINSTALL_SHORTCUT" />
                <category android:name="com.tpw.homeshell.category.SHORTCUT_CLOUDAPP" />
            </intent-filter>
            <intent-filter>
                <action android:name="com.android.launcher.action.UNINSTALL_SHORTCUT" />
            </intent-filter>
        </receiver>

        <receiver android:name="com.tpw.homeshell.PackageChangedReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.PACKAGE_CHANGED"/>
                <action android:name="android.intent.action.PACKAGE_REPLACED"/>
                <action android:name="android.intent.action.PACKAGE_REMOVED"/>
                <data android:scheme="package"></data>
            </intent-filter>
        </receiver>

	<!-- start:abb by zoujianyu,Topwise.2015-5-26.set default data id if no set.bug 527.-->
        <receiver android:name="com.tpw.homeshell.SimStateReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.SIM_STATE_CHANGED"/>        
            </intent-filter>
        </receiver>
	<!-- end:abb by zoujianyu,Topwise.2015-5-26.set default data id if no set.bug 527.-->

        <!-- The settings provider contains Home's data, like the workspace favorites -->
        <provider
            android:name="com.tpw.homeshell.LauncherProvider"
            android:authorities="com.tpw.homeshell.settings"
            android:exported="true"
            android:writePermission="com.tpw.homeshell.permission.WRITE_SETTINGS"
            android:readPermission="com.tpw.homeshell.permission.READ_SETTINGS" />

        <!-- for Cloud App -->
        <provider
            android:name="com.tpw.homeshell.ShortcutProvider"
            android:authorities="com.tpw.homeshell.shortcut"
            android:exported="true"
            tools:ignore="ExportedContentProvider" />

        <!-- for Card -->
        <provider
            android:name="com.tpw.homeshell.cardprovider.CardProvider"
            android:authorities="com.tpw.homeshell.card"
            android:exported="true"
            tools:ignore="ExportedContentProvider" />

        <meta-data android:name="android.nfc.disable_beam_default"
                       android:value="true" />

        <service android:name="com.topwise.liveweather.TopWindowService" />
        
    </application>
</manifest>
